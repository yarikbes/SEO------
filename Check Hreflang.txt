javascript:(function(){var SLUGS_URL='https://yarikbes.github.io/SEO------/slugs.json';setTimeout(function(){fetch(SLUGS_URL).then(r=>r.json()).then(data=>{var pageGroups=data.pageGroups;var groupMap={};var slugToGroup={};Object.keys(pageGroups).forEach(function(groupKey){var group=pageGroups[groupKey];Object.keys(group.slugs).forEach(function(slug){slugToGroup[slug]=groupKey;});if(group.aliases){group.aliases.forEach(function(alias){groupMap[alias]=groupKey;});}groupMap[groupKey]=groupKey;});var hreflangs=document.querySelectorAll('link[rel="alternate"][hreflang]');function stripLangPrefix(path){return path.replace(/^\/(?:[a-z]{2}(?:-[A-Z]{2})?)\//,'/');}function cleanPath(p){return p.replace(/\/+/g,'/').replace(/\/$/,'');}var currentPath=cleanPath(window.location.pathname);var cleanCurrentPath=stripLangPrefix(currentPath);var currentGroup=slugToGroup[cleanCurrentPath]||slugToGroup[cleanCurrentPath+'/']||slugToGroup[cleanCurrentPath.replace(/\/$/,'')];var currentUrl=window.location.href.replace(/\/+$/,'');var errors=[],allPages=[];if(hreflangs.length===0){var modal=document.createElement('div');modal.style.cssText='position:fixed!important;top:20px!important;left:20px!important;background:#fff!important;border:1px solid #ccc!important;box-shadow:0 2px 10px rgba(0,0,0,0.2)!important;z-index:999999!important;max-width:500px!important;font-family:Arial,sans-serif!important;font-size:14px!important;border-radius:8px!important;overflow:hidden!important';var header=document.createElement('div');header.style.cssText='background:#fff3cd!important;padding:16px!important;border-bottom:1px solid #ccc!important;display:flex!important;justify-content:space-between!important;align-items:center!important';var title=document.createElement('span');title.textContent='⚠️ Hreflang не найдены';title.style.cssText='font-weight:bold!important;color:#856404!important;font-size:16px!important';header.appendChild(title);var closeBtn=document.createElement('button');closeBtn.textContent='✕';closeBtn.style.cssText='background:none!important;border:none!important;font-size:18px!important;cursor:pointer!important;color:#666!important;padding:0!important;width:24px!important;height:24px!important';closeBtn.onclick=function(){document.body.removeChild(modal)};header.appendChild(closeBtn);modal.appendChild(header);var content=document.createElement('div');content.style.cssText='padding:20px!important;color:#333!important';content.innerHTML='<p style="margin:0 0 12px 0!important">На этой странице не найдены теги <code style="background:#f5f5f5!important;padding:2px 6px!important;border-radius:3px!important;font-family:monospace!important">&lt;link rel="alternate" hreflang="..."&gt;</code></p><p style="margin:0!important;color:#666!important;font-size:13px!important">Возможные причины:<br>• Страница не мультиязычная<br>• Теги скрыты JavaScript (клоакинг)<br>• Теги еще не загружены</p>';modal.appendChild(content);document.body.appendChild(modal);return;}hreflangs.forEach(function(link){var href=link.getAttribute('href').replace(/\/+$/,'');var hreflang=link.getAttribute('hreflang');var url=new URL(href,location.origin);var path=cleanPath(url.pathname);var cleanSlug=stripLangPrefix(path);var pageGroup=slugToGroup[cleanSlug]||slugToGroup[cleanSlug+'/']||slugToGroup[cleanSlug.replace(/\/$/,'')];var isCurrent=href===currentUrl||decodeURIComponent(href)===currentUrl||href===decodeURIComponent(currentUrl);var isError=false;var errorMsg='';if(!pageGroup){isError=true;errorMsg='URL не найден в базе слагов';}else if(currentGroup&&pageGroup!==currentGroup){isError=true;errorMsg='Неправильная группа: '+pageGroup+' вместо '+currentGroup;}allPages.push({href:href,path:path,hreflang:hreflang,pageGroup:pageGroup,isError:isError,isCurrent:isCurrent,errorMsg:errorMsg});if(isError){errors.push({type:!pageGroup?'unknown':'mismatch',href:href,path:path,hreflang:hreflang,pageGroup:pageGroup,expected:currentGroup,message:errorMsg});}});var modal=document.createElement('div');modal.style.cssText='position:fixed!important;top:20px!important;left:20px!important;background:#fff!important;border:1px solid #ccc!important;box-shadow:0 2px 10px rgba(0,0,0,0.2)!important;z-index:999999!important;max-width:900px!important;max-height:80vh!important;overflow:auto!important;font-family:Arial,sans-serif!important;font-size:13px!important';var header=document.createElement('div');header.style.cssText='background:'+(errors.length>0?'#ffebee':'#e8f5e9')+'!important;padding:6px 12px!important;border-bottom:1px solid #ccc!important;display:flex!important;justify-content:space-between!important;align-items:center!important;position:sticky!important;top:0!important;z-index:2!important;height:32px!important;min-height:32px!important;';var title=document.createElement('span');title.textContent='Hreflang Check: '+(errors.length>0?errors.length+' ошибок':'Всё ОК ✓');title.style.cssText='font-weight:bold!important;color:'+(errors.length>0?'#c62828':'#2e7d32')+'!important;font-size:14px!important';header.appendChild(title);var closeBtn=document.createElement('button');closeBtn.textContent='✕';closeBtn.style.cssText='background:none!important;border:none!important;font-size:16px!important;cursor:pointer!important;color:#666!important;padding:0!important;width:20px!important;height:20px!important';closeBtn.onclick=function(){document.body.removeChild(modal)};header.appendChild(closeBtn);modal.appendChild(header);var currentInfo=document.createElement('div');currentInfo.style.cssText='padding:4px 12px!important;background:#f5f5f5!important;border-bottom:1px solid #e0e0e0!important;position:sticky!important;top:32px!important;z-index:2!important;height:24px!important;min-height:24px!important;display:flex!important;align-items:center!important;font-size:12px!important;';currentInfo.innerHTML='<strong>Текущая страница:</strong> '+currentPath+' <span style="color:#666">('+currentGroup+')</span>';modal.appendChild(currentInfo);var table=document.createElement('table');table.style.cssText='width:100%!important;border-collapse:collapse!important';var thead=document.createElement('thead');thead.innerHTML='<tr style="background:#e8f0fe!important;border-bottom:1px solid #ccc!important;position:sticky!important;top:56px!important;z-index:2!important;height:24px!important;min-height:24px!important;font-size:12px!important"><th style="padding:4px 12px!important;text-align:left!important;font-weight:normal!important;color:#333!important;border-right:1px solid #ccc!important;width:40%!important;background:#e8f0fe!important;position:sticky!important;top:56px!important;z-index:2!important;height:24px!important;min-height:24px!important;">URL</th><th style="padding:4px 12px!important;text-align:left!important;font-weight:normal!important;color:#333!important;border-right:1px solid #ccc!important;width:15%!important;background:#e8f0fe!important;position:sticky!important;top:56px!important;z-index:2!important;height:24px!important;min-height:24px!important;">hreflang</th><th style="padding:4px 12px!important;text-align:left!important;font-weight:normal!important;color:#333!important;width:45%!important;background:#e8f0fe!important;position:sticky!important;top:56px!important;z-index:2!important;height:24px!important;min-height:24px!important;">Статус</th></tr>';table.appendChild(thead);var tbody=document.createElement('tbody');allPages.forEach(function(page,index){var row=document.createElement('tr');row.style.cssText='border-bottom:1px solid #e0e0e0!important;'+(page.isCurrent?'background:#d4edda!important':(page.isError?'background:#ffebee!important':(index%2===0?'background:#fff!important':'background:#f9f9f9!important')));var hrefCell=document.createElement('td');hrefCell.style.cssText='padding:4px 12px!important;border-right:1px solid #e0e0e0!important;color:#000!important;font-size:11px!important;word-break:break-all!important';var url=document.createElement('a');url.href=page.href;url.textContent=page.href;url.style.cssText='color:'+(page.isError?'#c62828':'#1558d6')+'!important;text-decoration:none!important';url.target='_blank';hrefCell.appendChild(url);var langCell=document.createElement('td');langCell.textContent=page.hreflang;langCell.style.cssText='padding:4px 12px!important;border-right:1px solid #e0e0e0!important;color:#000!important;font-weight:bold!important;font-size:12px!important;';var statusCell=document.createElement('td');statusCell.style.cssText='padding:4px 12px!important;color:#000!important;font-size:11px!important';if(page.isError){statusCell.innerHTML='<span style="color:#c62828!important;font-weight:bold!important">❌ '+page.errorMsg+'</span>';}else{statusCell.innerHTML='<span style="color:#2e7d32!important">✓ OK ('+page.pageGroup+')</span>';}row.appendChild(hrefCell);row.appendChild(langCell);row.appendChild(statusCell);tbody.appendChild(row);});table.appendChild(tbody);modal.appendChild(table);var footer=document.createElement('div');footer.style.cssText='padding:8px 12px!important;background:#f5f5f5!important;border-top:1px solid #ccc!important;display:flex!important;justify-content:space-between!important;align-items:center!important';var stats=document.createElement('span');stats.textContent='Всего: '+hreflangs.length+' | Ошибок: '+errors.length;stats.style.cssText='color:#666!important;font-size:12px!important';footer.appendChild(stats);var reloadBtn=document.createElement('button');reloadBtn.textContent='Перезагрузить страницу';reloadBtn.style.cssText='padding:6px 12px!important;background:#1976D2!important;color:#fff!important;border:none!important;border-radius:3px!important;cursor:pointer!important;font-size:12px!important';reloadBtn.onclick=function(){location.reload()};footer.appendChild(reloadBtn);modal.appendChild(footer);document.body.appendChild(modal);}).catch(function(err){alert('Ошибка загрузки базы слагов: '+err.message);});},500);})();