javascript:(function(){var u='https://yarikbes.github.io/SEO------/slugs.json';setTimeout(function(){fetch(u).then(r=>r.json()).then(d=>{var g=d.pageGroups,m={},s={};Object.keys(g).forEach(k=>{var p=g[k];Object.keys(p.slugs).forEach(sl=>{s[sl]=k;});if(p.aliases)p.aliases.forEach(a=>{m[a]=k;});m[k]=k;});var vhl=['x-default','sv-SE','sv','nl-NL','nl','de-DE','de','fr-FR','fr','es-ES','es','it-IT','it','pl-PL','pl','fi-FI','fi','da-DK','da','nb-NO','nb','pt-PT','pt','cs-CZ','cs','ro-RO','ro','el-GR','el','et-EE','et','hu-HU','hu','en-GB','en-NZ','en-CA','en-AU','en','es-AR','fr-CA','pt-BR','de-AT','de-CH'];var h=document.querySelectorAll('link[rel="alternate"][hreflang]'),cn=document.querySelector('link[rel="canonical"]'),cnUrl=cn?cn.getAttribute('href'):'';function strip(pt){return pt.replace(/^\/(?:[a-z]{2}(?:-[A-Z]{2})?)\//,'/');}function clean(pt){return pt.replace(/\/+/g,'/').replace(/\/$/,'');}var cp=clean(location.pathname),ccp=strip(cp),cg=s[ccp]||s[ccp+'/']||s[ccp.replace(/\/$/,'')],cu=location.href,e=[],ap=[],w=[];if(h.length===0){if(!document.cookie.split(';').some(c=>c.trim().indexOf('showCloak=')===0)){document.cookie='showCloak=1; path=/';location.reload();return;}var w=document.createElement('div');w.style.cssText='position:fixed!important;top:20px!important;left:20px!important;background:#fff!important;border:1px solid #ccc!important;box-shadow:0 2px 10px rgba(0,0,0,0.2)!important;z-index:2147483647!important;max-width:500px!important;font-family:Arial,sans-serif!important;font-size:14px!important;border-radius:8px!important';w.innerHTML='<div style="background:#fff3cd!important;padding:16px!important;border-bottom:1px solid #ccc!important;display:flex!important;justify-content:space-between!important;align-items:center!important;min-height:40px!important"><span style="font-weight:bold!important;color:#856404!important;flex:1!important">⚠️ Hreflang не найдены</span><button class="hreflang-close-btn" style="background:none!important;border:none!important;font-size:24px!important;line-height:1!important;padding:0!important;margin:0!important;width:24px!important;height:24px!important;min-width:24px!important;min-height:24px!important;flex-shrink:0!important;cursor:pointer!important;color:#856404!important;font-weight:bold!important;display:flex!important;align-items:center!important;justify-content:center!important">✕</button></div><div style="padding:20px!important"><p style="margin:0 0 12px 0!important;color:#000!important">На этой странице не найдены теги <code style="background:#f5f5f5!important;padding:2px 6px!important;border-radius:3px!important;color:#000!important">&lt;link rel="alternate" hreflang="..."&gt;</code></p><p style="margin:0!important;color:#333!important;font-size:13px!important"><strong>Возможные причины:</strong><br>• Страница не мультиязычная<br>• Теги скрыты JavaScript (клоакинг)<br>• Теги еще не загружены</p></div>';document.body.appendChild(w);w.querySelector('.hreflang-close-btn').addEventListener('click',function(ev){ev.preventDefault();ev.stopPropagation();w.remove();},true);return;}h.forEach(l=>{var hr=l.getAttribute('href'),hl=l.getAttribute('hreflang'),ur=new URL(hr,location.origin),pt=clean(ur.pathname),cs=strip(pt),pg=s[cs]||s[cs+'/']||s[cs.replace(/\/$/,'')],ic=hr===cu||decodeURIComponent(hr)===cu||hr===decodeURIComponent(cu),er=false,em=[],wm=[];if(hl!==hl.trim()){er=true;em.push('Пробелы в hreflang: "'+hl+'"');}if(!vhl.includes(hl)){er=true;em.push('Неправильный код hreflang: "'+hl+'"');}if(/^https?[:/][^/]/.test(hr)){er=true;em.push('Неправильный протокол в URL');}if(!pg){er=true;em.push('URL не найден в базе слагов');}else if(cg&&pg!==cg){er=true;em.push('Неправильная группа: '+pg+' вместо '+cg);}var isHome=ur.pathname==='/'||ur.pathname==='';if(cnUrl&&ic){var hlUrl=l.getAttribute('href');if(hlUrl!==cnUrl){wm.push('Не совпадает с canonical');w.push({href:hr,hreflang:hl,msg:'Не совпадает с canonical: '+cnUrl});}}if(hr.includes('_')){wm.push('Нижнее подчёркивание в URL');}if(/[A-Z]/.test(hr)){wm.push('Заглавные буквы в URL');}if(hr.includes('%20')){wm.push('Пробелы (%20) в URL');}if(/(?:https?:\/\/[^\/]+)\/.+\/\//.test(hr)){wm.push('Двойные слэши в URL');}if(/[^a-z0-9\-._~:/?#[\]@!$&'()*+,;=%]/.test(hr.toLowerCase())){wm.push('Недопустимые символы в URL');}if(!isHome){var hasSlash=hr.endsWith('/'),slashPattern=hasSlash?'with':'without';ap.forEach(function(p){if(p.slashPattern&&p.slashPattern!==slashPattern){wm.push('Несогласованный trailing slash');}});if(!ap.slashPattern)ap.slashPattern=slashPattern;}ap.push({href:hr,hreflang:hl,group:pg,err:er,cur:ic,msg:em.join('; '),warn:wm.length>0,warnMsg:wm.join('; '),slashPattern:isHome?null:slashPattern});if(er)e.push({href:hr,hreflang:hl,group:pg,msg:em.join('; ')});if(wm.length>0)w.push({href:hr,hreflang:hl,msg:wm.join('; ')});});var w=document.createElement('div');w.style.cssText='position:fixed!important;top:20px!important;left:20px!important;background:#fff!important;border:1px solid #ccc!important;box-shadow:0 2px 10px rgba(0,0,0,0.2)!important;z-index:2147483647!important;max-width:1200px!important;max-height:80vh!important;overflow:auto!important;font-family:Arial,sans-serif!important;font-size:13px!important';var hd='<div style="background:'+(e.length>0?'#ffebee':w.length>0?'#fff3cd':'#e8f5e9')+'!important;padding:6px 12px!important;border-bottom:1px solid #ccc!important;display:flex!important;justify-content:space-between!important;align-items:center!important;position:sticky!important;top:0!important;min-height:32px!important"><span style="font-weight:bold!important;color:'+(e.length>0?'#c62828':w.length>0?'#856404':'#2e7d32')+'!important;flex:1!important">Hreflang Check: '+(e.length>0?e.length+' ошибок':w.length>0?w.length+' предупреждений':'Всё ОК ✓')+'</span><button class="hreflang-close-btn" style="background:none!important;border:none!important;cursor:pointer!important;font-size:24px!important;line-height:1!important;padding:0!important;margin:0!important;width:24px!important;height:24px!important;min-width:24px!important;min-height:24px!important;flex-shrink:0!important;color:'+(e.length>0?'#c62828':w.length>0?'#856404':'#2e7d32')+'!important;font-weight:bold!important;display:flex!important;align-items:center!important;justify-content:center!important">✕</button></div>';var ci='<div style="padding:4px 12px!important;background:#f5f5f5!important;border-bottom:1px solid #e0e0e0!important;position:sticky!important;top:32px!important;color:#000!important"><strong style="color:#000!important">Текущая страница:</strong> '+cp+' <span style="color:#555!important">('+cg+')</span></div>';var tb='<table style="width:100%!important;border-collapse:collapse!important;table-layout:auto!important"><thead><tr style="background:#e8f0fe!important;position:sticky!important;top:56px!important"><th style="padding:4px 12px!important;text-align:left!important;color:#000!important;font-weight:bold!important">URL</th><th style="padding:4px 12px!important;text-align:left!important;color:#000!important;font-weight:bold!important;white-space:nowrap!important">hreflang</th><th style="padding:4px 12px!important;text-align:left!important;color:#000!important;font-weight:bold!important">Статус</th></tr></thead><tbody>';ap.forEach((p,i)=>{var bg=p.cur?'#d4edda':p.err?'#ffebee':p.warn?'#fff3cd':(i%2?'#f9f9f9':'#fff');var errMsg=p.msg?p.msg.split('; ').map(function(m){return'• '+m;}).join('<br>'):'';var warnMsg=p.warnMsg?p.warnMsg.split('; ').map(function(m){return'• '+m;}).join('<br>'):'';tb+='<tr style="background:'+bg+'!important"><td style="padding:4px 12px!important;font-size:11px!important;white-space:nowrap!important"><a href="'+p.href+'" target="_blank" style="color:'+(p.err?'#c62828':p.warn?'#856404':'#1558d6')+'!important;text-decoration:none!important">'+p.href+'</a></td><td style="padding:4px 12px!important;font-weight:bold!important;color:#333!important;white-space:nowrap!important">'+p.hreflang+'</td><td style="padding:4px 12px!important;font-size:11px!important">'+(p.err?'<span style="color:#c62828!important;font-weight:bold!important">❌<br>'+errMsg+'</span>':p.warn?'<span style="color:#856404!important;font-weight:bold!important">⚠️<br>'+warnMsg+'</span>':'<span style="color:#2e7d32!important">✓ OK ('+p.group+')</span>')+'</td></tr>';});tb+='</tbody></table>';var ft='<div style="padding:8px 12px!important;background:#f5f5f5!important;border-top:1px solid #ccc!important"><span style="color:#000!important;font-weight:bold!important">Всего: '+h.length+' | Ошибок: '+e.length+' | Предупреждений: '+w.length+'</span></div>';w.innerHTML=hd+ci+tb+ft;document.body.appendChild(w);w.querySelector('.hreflang-close-btn').addEventListener('click',function(ev){ev.preventDefault();ev.stopPropagation();w.remove();},true);}).catch(er=>{alert('Ошибка загрузки базы слагов: '+er.message);});},500);})()