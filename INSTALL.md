# Установка/Обновление букмарклета

## Размер
- **Текущий размер**: 5,785 символов  
- **Лимит браузера**: 10,000 символов  
- **Запас**: 4,215 символов ✅

## Инструкция по установке

### 1. Скопировать код
Откройте файл `Check Hreflang.txt` и скопируйте весь код (начинается с `javascript:(function(){...`).

### 2. Создать закладку
1. Откройте браузер
2. Нажмите `Ctrl+D` для создания новой закладки
3. Назовите её "Check Hreflang"
4. В поле URL вставьте скопированный код
5. Сохраните

### 3. Обновить существующий букмарклет
1. Правой кнопкой мыши на существующую закладку "Check Hreflang"
2. Выберите "Изменить" (Edit)
3. Замените старый код на новый
4. Сохраните

## Что нового в этой версии

### ✅ Оптимизация размера
- Сокращены имена переменных (`u`, `g`, `s`, `h`, `cp`, `cg`, `cu`, `e`, `ap`, `w`, `hd`, `ci`, `tb`, `ft`)
- Использование `innerHTML` вместо множественных `createElement`
- Удалены избыточные `!important` в стилях
- **Результат**: с 10,084 до 5,785 символов (-42%)

### ✅ Автоопределение клоакинга
Если на странице НЕ найдены hreflang-теги:
1. Букмарклет проверяет наличие куки `showCloak=1`
2. Если куки нет → устанавливает куки и перезагружает страницу
3. Если куки есть → показывает предупреждение о том, что теги не найдены

**Важно**: Это помогает обнаружить клоакинг, когда сайт скрывает hreflang от ботов.

## Тестирование

### Тест 1: Нормальный сайт с hreflang
- Откройте сайт с hreflang-тегами
- Запустите букмарклет
- **Ожидается**: Таблица с анализом всех hreflang

### Тест 2: Сайт с клоакингом
- Откройте `https://wizzspin-casino.net/` (или другой сайт с клоакингом)
- Запустите букмарклет
- **Ожидается**: 
  - Страница автоматически перезагрузится
  - Повторный запуск покажет результаты анализа

### Тест 3: Сайт без hreflang
- Откройте обычный сайт без hreflang
- Запустите букмарклет дважды
- **Ожидается**: Модальное окно с предупреждением

## История изменений

### v2.1 (31.10.2025) - commit e5f6713
- Оптимизирован размер с 10,084 до 5,785 символов
- Добавлена автоматическая установка куки для обнаружения клоакинга
- Улучшено модальное окно для случая отсутствия hreflang

### v2.0 (26.10.2025) - commit 4d8d553
- Расширена база слагов до 447 записей
- Добавлена группа "betting" с /wedden (NL)
- Добавлены переводы "app" для 17 языков
- Исправлен баг с undefined currentGroup
- Улучшена читаемость модальных окон

## Файлы проекта
- `Check Hreflang.txt` - актуальный букмарклет
- `slugs.json` - база данных слагов (447 записей)
- `README.md` - документация проекта
- `ИНСТРУКЦИЯ.md` - руководство по работе с букмарклетом
- `CHANGELOG_v2.md` - полная история изменений
